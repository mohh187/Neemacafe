<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>منيو نيمة | Neema Menu — جوال + لغتين + داكن/فاتح</title>
  <style>
    :root{
      --brand:#8b5e3c; --brand-2:#d4a373; --brand-dark:#70492d;
      --bg:#faf8f6; --card:#ffffff; --text:#1f1f1f; --muted:#6b6b6b; --border:#e9e6e3;
      --radius:16px; --shadow:0 10px 24px rgba(0,0,0,.08);
    }
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg); color:var(--text);}
    body.dark{ --bg:#0f0f0f; --card:#1a1a1a; --text:#f3f3f3; --muted:#b7b7b7; --border:#2a2a2a; }

    header{position:sticky;top:0;z-index:20;background:rgba(255,255,255,.9);backdrop-filter:saturate(140%) blur(8px);border-bottom:1px solid var(--border)}
    body.dark header{background:rgba(20,20,20,.82)}
    .wrap{max-width:960px;margin-inline:auto;padding:12px 14px}
    .top{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{width:48px;height:48px;border-radius:12px;border:1px solid var(--border);background:#fff;object-fit:contain}
    .brand h1{font-size:18px;margin:0;line-height:1.2}
    .actions{display:flex;gap:8px;align-items:center}
    .btn{border:1px solid var(--border);background:var(--card);color:var(--text);padding:8px 10px;border-radius:10px;font-size:14px;cursor:pointer}
    .btn.primary{background:var(--brand);border-color:transparent;color:#fff}
    .btn.ghost{background:transparent}
    .search{display:flex;gap:8px;margin:10px 0 8px}
    .search input{flex:1;padding:12px 14px;border-radius:12px;border:1px solid var(--border);background:var(--card);color:var(--text);font-size:15px}
    main{max-width:960px;margin-inline:auto;padding:10px 14px 180px}
    details{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;margin:10px 0}
    summary{list-style:none;padding:14px 16px;cursor:pointer;display:flex;align-items:center;gap:10px;font-weight:700}
    summary::marker{display:none}
    .pill{display:inline-block;background:#efe6de;color:#5a3a22;border-radius:999px;padding:3px 8px;font-size:12px;margin-inline-start:6px}
    body.dark .pill{background:#2b221b;color:#d9c3ad}
    .grid{display:grid;grid-template-columns:1fr;gap:10px;padding:8px 12px 14px}
    @media(min-width:520px){.grid{grid-template-columns:repeat(2,1fr)}}
    .item{display:grid;grid-template-columns:72px 1fr;gap:10px;align-items:center;background:var(--card);border:1px solid var(--border);border-radius:14px;padding:10px}
    .thumb{width:72px;height:72px;border-radius:12px;overflow:hidden;border:1px solid var(--border);background:#fafafa}
    .thumb img{width:100%;height:100%;object-fit:contain;background:#fafafa}
    .line{display:flex;align-items:center;gap:8px}
    .name{font-weight:700}
    .dots{flex:1 1 auto;border-bottom:1px dotted #c9c3bd;transform:translateY(-4px);opacity:.6}
    .price{font-weight:800;color:var(--brand)}
    .sub{font-size:12px;color:var(--muted)}
    .addBtn{margin-top:6px;padding:4px 6px;font-size:12px;border-radius:8px;border:1px solid var(--border);cursor:pointer;background:var(--brand-2);color:#fff}

    .bar{position:fixed;bottom:0;left:0;right:0;z-index:25;background:var(--card);border-top:1px solid var(--border);padding:10px}
    .bar .inner{max-width:960px;margin-inline:auto;display:flex;gap:8px}
    select, .bar .inner .btn{flex:1}
    footer{color:var(--muted);text-align:center;margin:18px 0 90px}

    /* Cart */
    #cart{position:fixed;bottom:60px;right:10px;width:300px;background:var(--card);border:1px solid var(--border);border-radius:12px;padding:10px;box-shadow:var(--shadow);display:none;z-index:30;overflow:auto;max-height:400px}
    #cart h3{margin:0 0 6px 0;font-size:16px}
    #cart div button{margin-left:4px;background:red;color:#fff;border:none;border-radius:6px;padding:2px 4px;cursor:pointer;font-size:12px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="top">
        <div class="brand">
          <img src="https://i.postimg.cc/g0g9RwM0/Untitled-design-9.png" alt="Neema Menu" />
          <div>
            <h1 id="title">منيو نيمة</h1>
            <span class="pill" id="tagline">قائمة جوال • ثنائية اللغة • داكن/فاتح</span>
          </div>
        </div>
        <div class="actions">
          <button class="btn" id="langBtn">English</button>
          <button class="btn" id="modeBtn">🌙</button>
        </div>
      </div>
      <div class="search">
        <input id="search" placeholder="ابحث باسم الصنف… (مثال: لاتيه، موهيتو)">
      </div>
    </div>
  </header>

  <main>
    <details open>
      <summary>🔥 <span data-i18n="hot_drinks">المشروبات الساخنة</span></summary>
      <div class="grid" id="hot-coffee"></div>
      <div class="grid" id="hot-tea"></div>
    </details>
    <details>
      <summary>❄️ <span data-i18n="cold_drinks">المشروبات الباردة</span></summary>
      <div class="grid" id="cold-coffee"></div>
      <div class="grid" id="cold-mojito"></div>
      <div class="grid" id="cold-other"></div>
    </details>
    <details>
      <summary>🍰 <span data-i18n="dessert">الحَلَى</span></summary>
      <div class="grid" id="dessert-cake"></div>
      <div class="grid" id="dessert-side"></div>
    </details>

    <footer>
      <div id="foot">© نيمة كافيه — قائمة تفاعلية للجوال</div>
    </footer>
  </main>

  <!-- Bottom bar -->
  <div class="bar">
    <div class="inner">
      <select id="table"></select>
      <button class="btn primary" id="callBtn">🔔 <span data-i18n="call_waiter">طلب النادل</span></button>
    </div>
  </div>

  <!-- Cart -->
  <div id="cart">
    <h3>سلة الطلبات / Cart</h3>
    <div id="cart-items"></div>
    <div style="margin-top:8px;"><strong>الإجمالي / Total: </strong><span id="cart-total">0</span> ريال</div>
    <button id="sendOrder" class="btn primary" style="margin-top:8px;">إرسال الطلب / Send Order</button>
  </div>

  <script>
    const TELEGRAM_BOT_TOKEN = '8234122453:AAGmkEFETh1yuXzgDHChoTu0YFuD0BeVK8c';
    const TELEGRAM_CHAT_ID = '5070730903';

    let lang = localStorage.getItem('nima.lang') || 'ar';
    const STRINGS = {
      ar: {title:'منيو نيمة', tagline:'قائمة جوال • ثنائية اللغة • داكن/فاتح', search:'ابحث باسم الصنف… (مثال: لاتيه، موهيتو)',
        hot_drinks:'المشروبات الساخنة', cold_drinks:'المشروبات الباردة', dessert:'الحَلَى', call_waiter:'طلب النادل',
        table:'طاولة', footer:'© نيمة كافيه — قائمة تفاعلية للجوال'},
      en: {title:'Neema Menu', tagline:'Mobile Menu • Bilingual • Dark/Light', search:'Search item… (e.g., Latte, Mojito)',
        hot_drinks:'Hot Drinks', cold_drinks:'Cold Drinks', dessert:'Dessert', call_waiter:'Call Waiter',
        table:'Table', footer:'© Neema Café — Interactive Mobile Menu'}
    };

    const IMG = 'https://i.postimg.cc/g0g9RwM0/Untitled-design-9.png';
    const data = {
      hot:{coffee:[{ar:'لاتيه',en:'Latte',price:12,img:IMG},{ar:'اسبريسو',en:'Espresso',price:6,img:IMG}],tea:[{ar:'شاي',en:'Tea',price:3,img:IMG}]},
      cold:{coffee:[{ar:'لاتيه مثلج',en:'Iced Latte',price:12,img:IMG}],mojito:[{ar:'موهيتو',en:'Mojito',price:17,img:IMG}],other:[{ar:'كركديه',en:'Hibiscus',price:8,img:IMG}]},
      dessert:{cake:[{ar:'نيمة كيك',en:'Nima Cake',price:18,img:IMG}],side:[{ar:'لقيمات',en:'Luqaimat',price:13,img:IMG}]}
    };

    const $ = s=>document.querySelector(s);
    let cart = [];
    const mount = (id, arr)=>{
      const root=document.getElementById(id); root.innerHTML='';
      arr.forEach(it=>{
        const name = (lang==='ar'?it.ar:it.en);
        const el=document.createElement('div'); el.className='item';
        el.innerHTML = `
          <div class="thumb"><img src="${it.img}" alt="${name}" /></div>
          <div>
            <div class="line"><span class="name">${name}</span><span class="dots"></span><span class="price">${it.price} ريال</span></div>
            <div class="sub">${lang==='ar'?'اضغط زر إضافة للسلة':'Use Add to Cart button'}</div>
            <button class="addBtn" onclick='addToCart(${JSON.stringify(it)})'>${lang==='ar'?'أضف للسلة':'Add to Cart'}</button>
          </div>`;
        root.appendChild(el);
      });
    };

    function addToCart(item){
      const existing = cart.find(i=>i.ar===item.ar);
      if(existing) existing.qty++;
      else cart.push({...item,qty:1});
      renderCart();
    }

    function renderCart(){
      const container = document.getElementById('cart-items'); container.innerHTML='';
      let total=0; cart.forEach(i=>{total+=i.price*i.qty; const el=document.createElement('div');
        el.innerHTML=`${i.ar} (${i.en}) x${i.qty} = ${i.price*i.qty} ريال <button onclick="removeFromCart('${i.ar}')">❌</button>`;
        container.appendChild(el);
      });
      document.getElementById('cart-total').textContent=total;
      document.getElementById('cart').style.display = cart.length?'block':'none';
    }

    function removeFromCart(name){cart=cart.filter(i=>i.ar!==name); renderCart();}

    document.getElementById('sendOrder').addEventListener('click',()=>{
      if(!cart.length)return alert(lang==='ar'?'السلة فارغة':'Cart is empty');
      const table = document.getElementById('table').value||'؟';
      let msg = `🛒 ${lang==='ar'?`طلب طاولة ${table}`:`Table ${table} order`}:\n`;
      cart.forEach(i=>{msg+=`${i.ar} (${i.en}) x${i.qty} = ${i.price*i.qty} ريال\n`;});
      const total = cart.reduce((sum,i)=>sum + i.price*i.qty,0);
      msg+=`${lang==='ar'?'الإجمالي':'Total'}: ${total} ريال`;
      const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage?chat_id=${TELEGRAM_CHAT_ID}&text=${encodeURIComponent(msg)}`;
      window.open(url,'_blank');
      alert(lang==='ar'?'تم إرسال الطلب! النادل سيأتي إليك فوراً!':'Order sent! Waiter will come to you immediately!');
      cart=[]; renderCart();
    });

    function renderAll(){
      document.getElementById('title').textContent = STRINGS[lang].title;
      document.getElementById('tagline').textContent = STRINGS[lang].tagline;
      document.getElementById('search').placeholder = STRINGS[lang].search;
      document.querySelectorAll('[data-i18n="hot_drinks"]').forEach(e=>e.textContent=STRINGS[lang].hot_drinks);
      document.querySelectorAll('[data-i18n="cold_drinks"]').forEach(e=>e.textContent=STRINGS[lang].cold_drinks);
      document.querySelectorAll('[data-i18n="dessert"]').forEach(e=>e.textContent=STRINGS[lang].dessert);
      document.querySelectorAll('[data-i18n="call_waiter"]').forEach(e=>e.textContent=STRINGS[lang].call_waiter);
      document.getElementById('foot').textContent = STRINGS[lang].footer;
      document.documentElement.lang = lang==='ar'?'ar':'en';
      document.documentElement.dir = lang==='ar'?'rtl':'ltr';
      mount('hot-coffee', data.hot.coffee);
      mount('hot-tea', data.hot.tea);
      mount('cold-coffee', data.cold.coffee);
      mount('cold-mojito', data.cold.mojito);
      mount('cold-other', data.cold.other);
      mount('dessert-cake', data.dessert.cake);
      mount('dessert-side', data.dessert.side);
    }

    const tableSelect = document.getElementById('table');
    function fillTables(){
      tableSelect.innerHTML='';
      for(let i=1;i<=15;i++){const o=document.createElement('option'); o.value=i; o.textContent = `${STRINGS[lang].table} ${i}`; tableSelect.appendChild(o);}
      const saved=localStorage.getItem('nima.table'); if(saved) tableSelect.value=saved;
      tableSelect.onchange = ()=>localStorage.setItem('nima.table', tableSelect.value);
    }

    document.getElementById('callBtn').addEventListener('click',()=>{
      const t = tableSelect.value || '؟';
      const ar = `🔔 طاولة ${t} تحتاج خدمة`;
      const en = `🔔 Table ${t} needs service`;
      alert(lang==='ar'?'النادل سيأتي إليك فوراً!':'Waiter will come to you immediately!');
      const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage?chat_id=${TELEGRAM_CHAT_ID}&text=${encodeURIComponent(ar+' | '+en)}`;
      window.open(url,'_blank');
    });

    const search = document.getElementById('search');
    search.addEventListener('input', ()=>{
      const q = search.value.trim().toLowerCase();
      const f = arr => arr.filter(x=> (x.ar+x.en).toLowerCase().includes(q));
      mount('hot-coffee', f(data.hot.coffee));
      mount('hot-tea', f(data.hot.tea));
      mount('cold-coffee', f(data.cold.coffee));
      mount('cold-mojito', f(data.cold.mojito));
      mount('cold-other', f(data.cold.other));
      mount('dessert-cake', f(data.dessert.cake));
      mount('dessert-side', f(data.dessert.side));
      if(!q) renderAll();
    });

    const modeBtn = document.getElementById('modeBtn');
    const initialMode = localStorage.getItem('nima.mode')||'light';
    if(initialMode==='dark') document.body.classList.add('dark');
    modeBtn.textContent = document.body.classList.contains('dark') ? '☀️' : '🌙';
    modeBtn.onclick = ()=>{document.body.classList.toggle('dark'); localStorage.setItem('nima.mode', document.body.classList.contains('dark')?'dark':'light'); modeBtn.textContent = document.body.classList.contains('dark') ? '☀️' : '🌙';};

    const langBtn = document
